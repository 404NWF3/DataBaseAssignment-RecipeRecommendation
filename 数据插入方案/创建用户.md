# 创建一个新用户/模式 (Schema)

**步骤：**

1.  **打开命令行 (CMD 或 Terminal)**。
2.  **以管理员身份登录**：
    ```bash
    sqlplus / as sysdba
    ```
    *(或者使用 system 账号登录：`sqlplus system/密码`)*

3.  **执行以下 SQL 语句**：

    ```sql
    -- 1. 创建用户 (相当于创建了一个同名的数据库空间)
    -- 用户名: allrecipes_db, 密码: password123 (请自行修改)
    CREATE USER allrecipes_db IDENTIFIED BY password123;

    -- 2. 赋予必要的权限
    -- CONNECT: 允许登录
    -- RESOURCE: 允许创建表、序列、过程等
    -- DBA: 给予最高权限 (开发环境推荐，省去权限烦恼；生产环境慎用)
    GRANT CONNECT, RESOURCE, DBA TO allrecipes_db;

    -- 3. 赋予表空间配额 (防止报错: ORA-01536)
    ALTER USER allrecipes_db QUOTA UNLIMITED ON USERS;
    ```

4.  **验证登录**：
    ```bash
    conn allrecipes_db/password123
    ```
    如果不报错，显示 `Connected.`，恭喜你，你的“新数据库”准备好了！

5.  **导入你的文件**：
    现在你可以直接在这个用户下运行你的脚本：
    ```bash
    @createtable.sql
    @implement.sql
    @data_import.sql
    ```

***

### 方案 B：创建一个可插拔数据库 (PDB)

如果你使用的是 Oracle 19c 且想要更好的隔离性：

1.  **以管理员登录**：
    ```bash
    sqlplus / as sysdba
    ```

2.  **创建 PDB**：
    ```sql
    -- 创建一个名为 allrecipes_pdb 的可插拔数据库
    -- 管理员用户: pdb_admin, 密码: password123
    CREATE PLUGGABLE DATABASE allrecipes_pdb 
    ADMIN USER pdb_admin IDENTIFIED BY password123
    FILE_NAME_CONVERT = ('/pdbseed/', '/allrecipes_pdb/');
    ```
    *(注意：`FILE_NAME_CONVERT` 的路径取决于你的安装路径，如果不确定，通常可以省略该行，让 Oracle 使用 OMF 自动管理)*

3.  **打开数据库**：
    ```sql
    ALTER PLUGGABLE DATABASE allrecipes_pdb OPEN;
    ```

4.  **保存状态 (重启后自动打开)**：
    ```sql
    ALTER PLUGGABLE DATABASE allrecipes_pdb SAVE STATE;
    ```

5.  **切换到该 PDB**：
    ```sql
    ALTER SESSION SET CONTAINER = allrecipes_pdb;
    ```

***

### 方案 C：使用 Docker (极速启动)

如果你本机装有 Docker，这是最快获得**完全纯净**环境的方法：

1.  **拉取并启动 Oracle 镜像** (推荐 gvenzl 的精简版镜像，下载快)：
    ```bash
    docker run -d -p 1521:1521 -e ORACLE_PASSWORD=password123 gvenzl/oracle-free
    ```

2.  **连接数据库**：
    *   主机：`localhost`
    *   端口：`1521`
    *   SID/Service Name：`FREE` 或 `XE`
    *   用户名：`SYSTEM`
    *   密码：`password123`

***

### 💡 总结：你应该选哪个？

为了完成你的 `createtable.sql` 和 `data_import.sql` 的运行，请直接使用 **方案 A**。

**操作流程：**
1.  打开 SQLPlus 或 SQL Developer。
2.  登录 `SYS` 或 `SYSTEM`。
3.  运行：
    ```sql
    CREATE USER allrecipes_v3 IDENTIFIED BY 123456;
    GRANT CONNECT, RESOURCE, DBA TO allrecipes_v3;
    ALTER USER allrecipes_v3 QUOTA UNLIMITED ON USERS;
    ```
4.  退出，使用新用户 `allrecipes_v3` 登录。
5.  运行你的 `.sql` 脚本。